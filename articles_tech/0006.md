# Git 手册


## ...

* 回滚与 revert(反做)
* blame for a single line
* 定位 repo
* 指定 repo
* 指定文件 history

*记录*

```shell
/*
 * 想撤销 Github 上的错误提交（回滚）怎么办？
 * 第一步，进行回滚
 * 第二步，强制 push（需要有相应权限）即可
 */
git reset (--hard) HEAD~1
git push --force origin master
```

**Remote Change**

git remote set-url origin ssh://gitlab@gitlab


**Git Grep commit log**

git log --grep=word

git log -Sword 即 git log -S 'word' filepath

git log -Gword

可参考 https://stackoverflow.com/questions/1337320/how-to-grep-git-commit-diffs-or-contents-for-a-certain-word


查询指定内容相关 commit

```sh
git log -S '#import-tags-dialog .tag-list .item .extra {' public/css/main.css
```

## 回滚与 revert(反做)

```sh
git revert ...
```


## blame for a single line

```sh
git blame -L 19,+2 --line-porcelain src/container.ts

git blame -L 19,+2 src/container.ts
```


## 定位 repo

```sh
git rev-parse --show-toplevel
```


## 指定 repo

<-C repoPath> 需要加在具体命令前

```sh
/usr/bin/git -C /Users/Egoist/Sites/Plugins/IAdB/ blame -L 19,+1 /Users/Egoist/Sites/Plugins/IAdB/src/oneForAll/index.js
```


## 指定文件 history

前者看 commit 历史，后者看每次的 diff

```sh
git log filename

git log -p filename
```